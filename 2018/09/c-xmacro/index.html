<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <meta property="og:url" content="https://blog.jaycetyle.com/2018/09/c-xmacro/">
  <meta property="og:site_name" content="Jayce çš„å…±äº«è¨˜æ†¶é«”">
  <meta property="og:title" content="[C/C&#43;&#43;] enum to string çš„æ–¹æ³•å¯¦ä½œ (X Macro)">
  <meta property="og:description" content="ç›¸ä¿¡å¾ˆå¤šäººå¾ˆå¤šæ™‚å€™éƒ½æœƒæƒ³è¦æŠŠ enum åˆ—èˆ‰çš„æ•¸å€¼è½‰æ›æˆ stringï¼Œæ–¹ä¾¿å¯«å‡ºæª”æ¡ˆæˆ–é¡¯ç¤ºåˆ° UI ä¸Šï¼Œé€™ç¨®è½‰æ›çš„æ–¹æ³•åœ¨å¾ˆå¤šé«˜éšèªè¨€ï¼Œä¾‹å¦‚ C#, Java ç­‰éƒ½æœ‰æ–¹æ³•ç›´æ¥æ”¯æ´ï¼Œä½†æ˜¯ C/C&#43;&#43; å°±æ²’é€™éº¼æ–¹ä¾¿äº†ã€‚ä»¥ä¸‹ä»‹ç´¹å¹¾ç¨®åœ¨ C&#43;&#43; å¯¦ä½œ enum è½‰ string çš„æ–¹æ³•ã€‚">
  <meta property="og:locale" content="zh_tw">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2018-09-20T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-04-02T00:00:00+00:00">
    <meta property="article:tag" content="C/C&#43;&#43;">

        
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="[C/C&#43;&#43;] enum to string çš„æ–¹æ³•å¯¦ä½œ (X Macro)">
  <meta name="twitter:description" content="ç›¸ä¿¡å¾ˆå¤šäººå¾ˆå¤šæ™‚å€™éƒ½æœƒæƒ³è¦æŠŠ enum åˆ—èˆ‰çš„æ•¸å€¼è½‰æ›æˆ stringï¼Œæ–¹ä¾¿å¯«å‡ºæª”æ¡ˆæˆ–é¡¯ç¤ºåˆ° UI ä¸Šï¼Œé€™ç¨®è½‰æ›çš„æ–¹æ³•åœ¨å¾ˆå¤šé«˜éšèªè¨€ï¼Œä¾‹å¦‚ C#, Java ç­‰éƒ½æœ‰æ–¹æ³•ç›´æ¥æ”¯æ´ï¼Œä½†æ˜¯ C/C&#43;&#43; å°±æ²’é€™éº¼æ–¹ä¾¿äº†ã€‚ä»¥ä¸‹ä»‹ç´¹å¹¾ç¨®åœ¨ C&#43;&#43; å¯¦ä½œ enum è½‰ string çš„æ–¹æ³•ã€‚">


        <title>
  [C/C&#43;&#43;] enum to string çš„æ–¹æ³•å¯¦ä½œ (X Macro) | Jayce çš„å…±äº«è¨˜æ†¶é«”
</title>

        

<link rel="shortcut icon" href="/images/favicon.ico">

<link rel="shortcut icon" href="/images/favicon.png">

<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">

<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">

<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">


        <link href="https://fonts.googleapis.com/css?family=Oswald:400" rel="stylesheet">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">      
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

        
        
        
        
        
        <link rel="stylesheet" href="https://blog.jaycetyle.com/css/styles.min.6a7e3e1c24ad4b4b16f344cfc54f4b5a4e92f35366ada3879f0176264c5f99b9.css" integrity="sha256-an4&#43;HCStS0sW80TPxU9LWk6S81NmraOHnwF2Jkxfmbk=">
        
        
        <link id="theme-style" rel="stylesheet" href="">

        
        <script>
            window.themeUrls = {
            light: "\/css\/light.min.0d91bc92b83a6a8aac989d53ce618ea99f98702fd931a07d8219dd7c3ae030eb.css",
            dark: "\/css\/dark.min.b2aa340dd145dc915676610bb68b02055a3a8bc8361406c8c9e50006ec5bc7be.css"
            };
        </script>
        
  <link rel="me" type="text/html" href="https://www.linkedin.com/in/chieh-lin-569430a9/"/>


<link rel="shortcut icon" href="/images/favicon.ico">

<link rel="shortcut icon" href="/images/favicon.png">

<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">

<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">

<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">


<link rel="alternate" type="application/rss+xml" href='https://blog.jaycetyle.com/index.xml' />

<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta name="author" content="" />
<meta name="copyright" content="" />


<meta name="description" content="ç›¸ä¿¡å¾ˆå¤šäººå¾ˆå¤šæ™‚å€™éƒ½æœƒæƒ³è¦æŠŠ enum åˆ—èˆ‰çš„æ•¸å€¼è½‰æ›æˆ stringï¼Œæ–¹ä¾¿å¯«å‡ºæª”æ¡ˆæˆ–é¡¯ç¤ºåˆ° UI ä¸Šï¼Œé€™ç¨®è½‰æ›çš„æ–¹æ³•åœ¨å¾ˆå¤šé«˜éšèªè¨€ï¼Œä¾‹å¦‚ C#, Java ç­‰éƒ½æœ‰æ–¹æ³•ç›´æ¥æ”¯æ´ï¼Œä½†æ˜¯ C/C&#43;&#43; å°±æ²’é€™éº¼æ–¹ä¾¿äº†ã€‚ä»¥ä¸‹ä»‹ç´¹å¹¾ç¨®åœ¨ C&#43;&#43; å¯¦ä½œ enum è½‰ string çš„æ–¹æ³•ã€‚">

  <style type="text/css">
  .feature-image {
    background-image: linear-gradient(
      rgba(0, 0, 0, 0.15),
      rgba(0, 0, 0, 0.15)
    ), url('https://blog.jaycetyle.com/images/banner.jpg');
    height: 400px;
    background-repeat:no-repeat;
    background-size:cover;
    background-position: center;
  }
  .feature-image-text {
    margin-top: 20px;
  }

  @media (max-width: 1024px) {
    .feature-image {
      height: 300px;
    }
  }

  @media (max-width: 768px) {
    .feature-image {
      height: 250px;
    }
  }

  @media (max-width: 520px) {
    .feature-image {
      display: none;
    }
  }
</style>




    </head>
    <body>
        <nav class="navbar fixed-top navbar-expand-md navbar-primary bg-primary py-1 top-nav">
            <div class="container">
                    <a href="https://blog.jaycetyle.com/"><img class="logo" src="https://blog.jaycetyle.com//images/logo.png"></a>
<a class="navbar-brand pr-4 d-none d-sm-block" href="https://blog.jaycetyle.com/">Jayce&#39;s Shared Memory</a>
                <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fas fa-bars" style="color:black"></i>
                </button>
                <div class="navbar-collapse collapse" id="navbarCollapse">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item">
    <a class="nav-link active" href="https://blog.jaycetyle.com/">Home</a>
</li>
<li class="nav-item">
    <a class="nav-link active" href="https://blog.jaycetyle.com/archive/">Archive</a>
</li>
<li class="nav-item">
    <a class="nav-link active" href="https://github.com/jaycetyle">Github</a>
</li>
<li class="nav-item">
    <a class="nav-link active" href="https://blog.jaycetyle.com/about/">About</a>
</li>
<button id="theme-toggle" style="background: transparent; border: none; color: inherit; cursor: pointer;">
    ğŸŒ™
</button>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const themeLink = document.getElementById("theme-style");
        const toggleBtn = document.getElementById("theme-toggle");

        function getPreferredTheme() {
            return window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
        }

        function setTheme(theme) {
            themeLink.href = window.themeUrls[theme];
            toggleBtn.textContent = theme === "dark" ? "â˜€ï¸" : "ğŸŒ™";
        }

        let currentTheme = getPreferredTheme();
        setTheme(currentTheme);

        toggleBtn.addEventListener("click", function () {
            currentTheme = currentTheme === "dark" ? "light" : "dark";
            setTheme(currentTheme);
        });
    });
</script>
                    </ul>
                </div>
            </div>
        </nav>

        
  <header class="feature-image">
  <div class="feature-image-text white-shadow-text">
    <h1 class="font-weight:bold">[C/C&#43;&#43;] enum to string çš„æ–¹æ³•å¯¦ä½œ (X Macro)</h1>
  </div>
</header>


        <div class="container main my-4">
            
  <div class="post p-3 p-sm-5">
    <h3 class="post-title">[C/C&#43;&#43;] enum to string çš„æ–¹æ³•å¯¦ä½œ (X Macro)</h3>
    <div class="mt-2 mb-3">
    <small>
        <strong>By Lin Chieh (Jayce)</strong>
        | <i class="far fa-calendar-alt"></i>&nbsp;Sep 20, 2018&nbsp;
        | <i class="fa fa-tags" title="Tags" aria-hidden="true"></i> <a href='/tags/c/c&#43;&#43;/'>C/C&#43;&#43;</a>
    </small>
</div>

    <div class="mt-4 mb-4 main-content">
      <p>ã€€ã€€ç›¸ä¿¡å¾ˆå¤šäººå¾ˆå¤šæ™‚å€™éƒ½æœƒæƒ³è¦æŠŠ enum åˆ—èˆ‰çš„æ•¸å€¼è½‰æ›æˆ stringï¼Œæ–¹ä¾¿å¯«å‡ºæª”æ¡ˆæˆ–é¡¯ç¤ºåˆ° UI ä¸Šï¼Œé€™ç¨®è½‰æ›çš„æ–¹æ³•åœ¨å¾ˆå¤šé«˜éšèªè¨€ï¼Œä¾‹å¦‚ C#ã€Java ç­‰éƒ½æœ‰æ–¹æ³•ç›´æ¥æ”¯æ´ï¼Œä½†æ˜¯ C/C++ å°±æ²’é€™éº¼æ–¹ä¾¿äº†ã€‚ä»¥ä¸‹ä»‹ç´¹å¹¾ç¨®åœ¨ C++ å¯¦ä½œ enum è½‰ string çš„æ–¹æ³•ã€‚</p>
<h3 id="æ–¹æ³•-1-ä½¿ç”¨-switch-case">æ–¹æ³• 1. ä½¿ç”¨ switch case</h3>
<p>ã€€ã€€é€™å€‹æ–¹æ³•æ‡‰è©²æ˜¯æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•äº†ï¼Œä»¥ä¸‹æ˜¯ç¨‹å¼çš„ç¯„ä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#f00">enum</span> EValue { KZero, KOne, KTwo };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f00">const</span> <span style="color:#ee82ee">char</span>* <span style="color:#ff0">ToString</span>(EValue value)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#f00">switch</span> (value) {
</span></span><span style="display:flex;"><span>	<span style="color:#f00">case</span> KZero:
</span></span><span style="display:flex;"><span>		<span style="color:#f00">return</span> <span style="color:#87ceeb">&#34;Zero&#34;</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f00">case</span> KOne:
</span></span><span style="display:flex;"><span>		<span style="color:#f00">return</span> <span style="color:#87ceeb">&#34;One&#34;</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#f00">case</span> KTwo:
</span></span><span style="display:flex;"><span>		<span style="color:#f00">return</span> <span style="color:#87ceeb">&#34;Two&#34;</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#f00">return</span> <span style="color:#87ceeb">&#34;Not Defined&#34;</span>;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>ã€€ã€€ä½¿ç”¨çš„æ™‚å€™æŠŠæƒ³è¦è½‰æ›çš„ enum ç•¶ä½œå¼•æ•¸å‘¼å« ToString å‡½æ•¸å°±å¯ä»¥äº†ã€‚å¯¦ä½œç°¡å–®ã€ç›´è¦ºï¼Œä½†æœ‰å€‹å°ç¼ºé»ï¼Œç•¶ enum åˆ—èˆ‰çš„æ•¸é‡ä¸€å¤§çš„æ™‚å€™ï¼Œé€™å€‹ switch case æœƒè®“äººè¦ºå¾—å¾ˆè¨å­ï¼Œæœ‰æ²’æœ‰è¾¦æ³•æ”¹å–„å‘¢ï¼Ÿ</p>
<p>ã€€</p>
<h3 id="æ–¹æ³•-2-ä½¿ç”¨é™£åˆ—ç´¢å¼•é€²è¡ŒæŸ¥è¡¨">æ–¹æ³• 2. ä½¿ç”¨é™£åˆ—ç´¢å¼•é€²è¡ŒæŸ¥è¡¨</h3>
<p>ã€€ã€€é€™å€‹æ–¹æ³•æ˜¯åˆ©ç”¨ enum æœƒå¾ 0 é–‹å§‹åˆ—èˆ‰çš„ç‰¹æ€§ï¼Œç›´æ¥å°‡ enum å€¼ç•¶ä½œé™£åˆ—ç´¢å¼•å€¼ä¾†æŸ¥è¡¨ï¼Œå¦‚ä»¥ä¸‹ç¯„ä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#f00">enum</span> EValue { KZero, KOne, KTwo };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f00">const</span> <span style="color:#ee82ee">char</span>* <span style="color:#ff0">ToString</span>(EValue value)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#f00">static</span> <span style="color:#ee82ee">char</span> *table[] = { <span style="color:#87ceeb">&#34;Zero&#34;</span>, <span style="color:#87ceeb">&#34;One&#34;</span>, <span style="color:#87ceeb">&#34;Two&#34;</span> };
</span></span><span style="display:flex;"><span>	<span style="color:#f00">return</span> table[value];
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>ã€€ã€€ä½¿ç”¨æ–¹æ³•ä¸€æ¨£æ˜¯å‘¼å« ToString å°±å¯ä»¥äº†ï¼Œä½†å¯¦ä½œè®Šå¾—ç°¡æ½”å¤šäº†ï¼Œæ˜¯å§ï¼Ÿä¸éé€™å€‹æ–¹æ³•ä¸€æ¨£æœ‰å€‹ç¼ºé»ï¼Œç•¶ enum åˆ—èˆ‰æ•¸é‡è®Šå¤šçš„æ™‚å€™ï¼Œçœ‹ç¨‹å¼ç¢¼æ™‚è¦æ¯”å°å°±æœ‰é»ç—›è‹¦äº†ï¼Œæ¯”å¦‚ç¬¬ 17 å€‹åˆ—èˆ‰å€¼å°æ‡‰çš„å­—ä¸²æ˜¯ä»€éº¼ï¼Ÿæ˜¯ä¸æ˜¯è¦æ…¢æ…¢æ•¸äº†å‘¢ï¼Ÿç°¡å–®çš„è¾¦æ³•æ˜¯é€éæ’ç‰ˆå’Œè¨»è§£ä¾†å”åŠ©ç¨‹å¼ç¢¼çš„é–±è®€ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨ C99 èªæ³•ï¼Œä¸éä»¥ä¸‹å†ä»‹ç´¹å¦ä¸€å€‹è¾¦æ³•ä¾†æ”¹å–„é€™å€‹å•é¡Œã€‚</p>
<p>ã€€</p>
<h3 id="æ–¹æ³•-3-ä½¿ç”¨-x-macro-ä¾†å¯¦ä½œé™£åˆ—æŸ¥è¡¨">æ–¹æ³• 3. ä½¿ç”¨ X Macro ä¾†å¯¦ä½œé™£åˆ—æŸ¥è¡¨</h3>
<p>ã€€ã€€ X macro æ˜¯ä¸€ç¨® C/C++ çš„æŠ€è¡“ï¼Œç°¡å–®çš„èªªæ˜å’Œç¯„ä¾‹å¯ä»¥åœ¨<a href="https://en.wikipedia.org/wiki/X_Macro">ç¶­åŸºç™¾ç§‘</a>æŸ¥åˆ°ï¼Œé€™è£¡ä¾¿æ˜¯è¦é‹ç”¨é€™å€‹æŠ€è¡“ä¾†æ”¹å–„æ–¹æ³• 2 çš„å°å•é¡Œï¼Œåƒè€ƒä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#e5e5e5">#define VALUE_TABLE \
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5">	X(KZero, &#34;Zero&#34;) \
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5">	X(KOne, &#34;One&#34;) \
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5">	X(KTwo, &#34;Two&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span>
</span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#define X(a, b) a,
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span><span style="color:#f00">enum</span> EValue { VALUE_TABLE };
</span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#undef X
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span>
</span></span><span style="display:flex;"><span><span style="color:#f00">const</span> <span style="color:#ee82ee">char</span>* <span style="color:#ff0">ToString</span>(EValue value)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#define X(a, b) b,
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span>	<span style="color:#f00">static</span> <span style="color:#ee82ee">char</span> *table[] = { VALUE_TABLE };
</span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#undef X
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span>	<span style="color:#f00">return</span> table[value];
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>ã€€ã€€é€™å€‹æ–¹æ³•çš„é—œéµåœ¨æ–¼ X macro çš„å®šç¾©ï¼Œé›–ç„¶çœ‹èµ·ä¾†æœ‰é»å¯æ€•ï¼Œä»”ç´°æ¨æ•²ä¸€ä¸‹ï¼Œæœƒç™¼ç¾é€™è£¡å®šç¾©çš„ EValue å’Œ table[] èˆ‡æ–¹æ³• 2 æ‰€å®šç¾©çš„å®Œå…¨ä¸€æ¨¡ä¸€æ¨£ï¼Œåªæ˜¯ä¸­é–“çš„ç¨‹å¼ç¢¼é€éå‰è™•ç†å™¨ä»¥ VALUE_TABLE å–ä»£äº†ï¼Œä½†ç¢ºå¯¦æ”¹å–„äº† &ldquo;ç´¢å¼•&rdquo; å’Œ &ldquo;å€¼&rdquo; ä¹‹é–“æ¯”å°çš„å•é¡Œï¼Œåœ¨ VALUE_TABLE ä¸­å¯ä»¥å¾ˆæ˜ç¢ºåœ°çœ‹å‡ºæ¯ä¸€å€‹ enum åˆ—èˆ‰å€¼æ‰€å°æ‡‰çš„ stringã€‚</p>
<p>ã€€ã€€åˆ°é€™è£¡æˆ‘å€‘å·²ç¶“æ”¹å–„å¾ˆå¤šå•é¡Œï¼Œä½†é‚„æœ‰ä¸€å€‹æ˜é¡¯çš„ç‘•ç–µï¼Œå°±æ˜¯ enum ä¸ä¸€å®šè¦å¾ 0 é–‹å§‹ï¼Œä¹Ÿä¸ä¸€å®šè¦æ˜¯é€£çºŒæ•´æ•¸ï¼Œé€™æ™‚å€™è©²æ€éº¼è¾¦å‘¢ï¼Ÿ</p>
<p>ã€€</p>
<h3 id="æ–¹æ³•-4-ä½¿ç”¨-x-macro-åŠ-stdmap-å¯¦ä½œæŸ¥è¡¨æ–¹æ³•">æ–¹æ³• 4. ä½¿ç”¨ X Macro åŠ std::map å¯¦ä½œæŸ¥è¡¨æ–¹æ³•</h3>
<p>ã€€ã€€å¦‚æœè¦å¯¦ä½œéé€£çºŒæ•´æ•¸çš„æŸ¥è¡¨ï¼Œæœ€ç°¡å–®çš„æ–¹æ³•å°±æ˜¯é‹ç”¨ std::map äº†ï¼Œä»–æ˜¯ä¸€å€‹ç´…é»‘æ¨¹çš„å¯¦ä½œï¼Œä½¿ç”¨ç´¢å¼•æŸ¥è©¢ä¸€å€‹å€¼çš„æ™‚é–“è¤‡é›œåº¦æ˜¯ O(logN)ã€‚åƒè€ƒä»¥ä¸‹ç¯„ä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#e5e5e5">#define VALUE_TABLE \
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5">	X(KZero, = 0, &#34;Zero&#34;) \
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5">	X(KOne,  = 1, &#34;One&#34;) \
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5">	X(KTwo,  = 8, &#34;Two&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span>
</span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#define X(a, b, c) a b,
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span><span style="color:#f00">enum</span> EValue { VALUE_TABLE };
</span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#undef X
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span>
</span></span><span style="display:flex;"><span><span style="color:#f00">const</span> <span style="color:#ee82ee">char</span>* <span style="color:#ff0">ToString</span>(EValue value)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#f00">static</span> std::map&lt;EValue, <span style="color:#f00">const</span> <span style="color:#ee82ee">char</span>*&gt; table;
</span></span><span style="display:flex;"><span>	<span style="color:#f00">static</span> <span style="color:#ee82ee">bool</span> isInit = false;
</span></span><span style="display:flex;"><span>	<span style="color:#f00">if</span> (isInit)
</span></span><span style="display:flex;"><span>		<span style="color:#f00">return</span> table[value];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#define X(a, b, c) table[a] = c;
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span>	VALUE_TABLE
</span></span><span style="display:flex;"><span><span style="color:#e5e5e5">#undef X
</span></span></span><span style="display:flex;"><span><span style="color:#e5e5e5"></span>
</span></span><span style="display:flex;"><span>	isInit = true;
</span></span><span style="display:flex;"><span>	<span style="color:#f00">return</span> table[value];
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>ã€€ã€€æˆ‘æ•…æ„æŠŠ KTwo çš„åˆ—èˆ‰å€¼æ”¹æˆ 8 ï¼Œä»¥é©—è­‰é€™å€‹å‡½æ•¸æ˜¯å¯ä»¥å…è¨±éé€£çºŒçš„åˆ—èˆ‰å€¼ã€‚é€™é‚Šæœ‰é‹ç”¨äº†ä¸€å€‹ isInit çš„è®Šæ•¸ä¾†é¿å…è¡¨è¢«é‡è¤‡åˆå§‹åŒ–ï¼ŒX Macro çš„éƒ¨åˆ†ï¼Œåœ¨ enum æ˜¯è¢«å±•é–‹æˆï¼š</p>
<div style="line-height:150%;font-style:italic">
ã€€ã€€KZero = 0,<br>
ã€€ã€€KOne = 1,<br>
ã€€ã€€KTwo = 8,<br>
</div>
<p>ã€€ã€€åœ¨ table çš„éƒ¨åˆ†å‰‡æ˜¯è¢«å±•é–‹æˆï¼š</p>
<div style="line-height:150%;font-style:italic">
ã€€ã€€table[KZero] = "Zero";<br>
ã€€ã€€table[KOne] = "One";<br>
ã€€ã€€table[KTwo] = "Two";<br>
</div>
<p>ã€€ã€€ç›¸ä¿¡å¤§å®¶ä»”ç´°æƒ³ä¸€ä¸‹æ‡‰è©²çœ‹å¾—æ‡‚ã€‚<a href="http://www.drdobbs.com/the-new-c-x-macros/184401387">é€™è£¡</a>æ˜¯æˆ‘å­¸åˆ°é€™å€‹æ–¹æ³•åƒè€ƒç¶²ç«™ï¼Œå…¶ä¸­è£¡é¢æœ‰ C99 çš„å¯¦ä½œæ–¹æ³•ï¼Œå¦å¤–ä¸Šé¢çš„ std::map ä¹Ÿæ˜¯å¯ä»¥ç”¨ switch case ä¾†åšã€‚</p>

      <div class="share-icons d-flex justify-content-center d-print-none">
        <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fblog.jaycetyle.com%2f2018%2f09%2fc-xmacro%2f&text=%5bC%2fC%2b%2b%5d%20enum%20to%20string%20%e7%9a%84%e6%96%b9%e6%b3%95%e5%af%a6%e4%bd%9c%20%28X%20Macro%29&tw_p=tweetbutton" class="p-2" title="Share on Twitter" target="_blank" rel="nofollow">
    <div>
        <span class="fa-stack">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
        </span>
    </div>
    <div class="fa-inverse text-center"><small>Tweet</small></div>
</a>

<a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fblog.jaycetyle.com%2f2018%2f09%2fc-xmacro%2f&t=%5bC%2fC%2b%2b%5d%20enum%20to%20string%20%e7%9a%84%e6%96%b9%e6%b3%95%e5%af%a6%e4%bd%9c%20%28X%20Macro%29" class="p-2" title="Share on Facebook" target="_blank" rel="nofollow">
    <div>
        <span class="fa-stack">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-facebook fa-stack-1x fa-inverse"></i>
        </span>
    </div>
    <div class="fa-inverse text-center"><small>Share</small></div>
</a>

<a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.jaycetyle.com%2f2018%2f09%2fc-xmacro%2f&title=%5bC%2fC%2b%2b%5d%20enum%20to%20string%20%e7%9a%84%e6%96%b9%e6%b3%95%e5%af%a6%e4%bd%9c%20%28X%20Macro%29&source=mattbutton.com" class="p-2" title="Share on LinkedIn" target="_blank" rel="nofollow">
    <div>
        <span class="fa-stack">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
        </span>
    </div>
    <div class="fa-inverse text-center"><small>Share</small></div>
</a>

<a href="javascript:window.print()" title="Print this article" class="p-2" target="_blank" rel="nofollow">
    <div>
        <span class="fa-stack">
            <i class="fas fa-circle fa-stack-2x"></i>
            <i class="fa fa-print fa-stack-1x fa-inverse"></i>
        </span>
    </div>
    <div class="fa-inverse text-center"><small>Print</small></div>
</a>
      </div>
    </div>

    

    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "jaycetyle" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </div>
  <div class="sidebar d-print-none d-none d-xl-block">
  <h5 class="mt-4 post-title">Recent Posts</h5>
  <ul class="mt-2 pl-4">
    
    <li class="mt-2 mb-2"><a href="https://blog.jaycetyle.com/2021/10/linux-fio-tips/">Linux fio æ¸¬è©¦åƒæ•¸çš„çœ‰çœ‰è§’è§’</a></li>
    
    <li class="mt-2 mb-2"><a href="https://blog.jaycetyle.com/2021/10/kprobe-userspace-tool/">Kprobe Userspace Tool ä½¿ç”¨ç­†è¨˜</a></li>
    
    <li class="mt-2 mb-2"><a href="https://blog.jaycetyle.com/2019/12/linux-bug-on-case-study/">Linux Kernel BUG_ON å‚¾å°è¨Šæ¯åˆ†æåŠæ¡ˆä¾‹åˆ†äº«</a></li>
    
    <li class="mt-2 mb-2"><a href="https://blog.jaycetyle.com/2019/11/passing-smart-pointer/">[C&#43;&#43;] å¹¾ç¨®åœ¨å‡½æ•¸å‚³é Smart Pointer çš„æ–¹å¼æ•´ç†</a></li>
    
    <li class="mt-2 mb-2"><a href="https://blog.jaycetyle.com/2019/10/jekyll-to-hugo/">å¾ Jekyll é·ç§»åˆ° Hugo æ­¥é©Ÿå¿ƒå¾—åˆ†äº«</a></li>
    
  </ul>
  <h5 class="mt-4 text-capitalize post-title">Tags</h5>
  <ul class="mt-2 pl-4">
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/c/c&#43;&#43;/'>
      C/C&#43;&#43;
      <span class="badge badge-pill badge-secondary">11</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/ubuntu-%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1/'>
      Ubuntu ä½œæ¥­ç³»çµ±
      <span class="badge badge-pill badge-secondary">7</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/linux-kernel/'>
      Linux Kernel
      <span class="badge badge-pill badge-secondary">6</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/%E9%96%8B%E7%99%BC%E7%92%B0%E5%A2%83/'>
      é–‹ç™¼ç’°å¢ƒ
      <span class="badge badge-pill badge-secondary">5</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/'>
      ç‰ˆæœ¬æ§åˆ¶
      <span class="badge badge-pill badge-secondary">4</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/%E9%96%92%E8%81%8A/'>
      é–’èŠ
      <span class="badge badge-pill badge-secondary">4</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/%E6%A8%B9%E8%8E%93%E6%B4%BE/'>
      æ¨¹è“æ´¾
      <span class="badge badge-pill badge-secondary">3</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/%E7%B6%B2%E7%AB%99%E6%9E%B6%E8%A8%AD/'>
      ç¶²ç«™æ¶è¨­
      <span class="badge badge-pill badge-secondary">3</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/c%23/'>
      C#
      <span class="badge badge-pill badge-secondary">1</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/linux-system-performance/'>
      Linux System Performance
      <span class="badge badge-pill badge-secondary">1</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/nas-%E8%88%87%E8%B3%87%E6%96%99%E5%82%99%E4%BB%BD/'>
      NAS èˆ‡è³‡æ–™å‚™ä»½
      <span class="badge badge-pill badge-secondary">1</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/python/'>
      Python
      <span class="badge badge-pill badge-secondary">1</span>
      </a>
    </li>
    
    <li class="mt-2 mb-2">
      <a href='https://blog.jaycetyle.com//tags/%E5%B7%A5%E5%85%B7%E8%BB%9F%E9%AB%94/'>
      å·¥å…·è»Ÿé«”
      <span class="badge badge-pill badge-secondary">1</span>
      </a>
    </li>
    
  </ul>
</div>

        </div>

        <footer class="mt-auto footer d-print-none">
            <div class="container-fluid">
                <div class="d-flex col-xl-12 justify-content-center">
                    <div>Â© 2019<a href="https://blog.jaycetyle.com/about/"> Lin Chieh ( Jayce )</a>. Powered by <a href="https://gohugo.io/">Hugo</a> using <a href='https://www.mattbutton.com'>Matt Button</a>'s <a href='https://github.com/mattbutton/silhouette-hugo'>Silhouette Hugo</a> theme.</div>
                </div>
                </hr>
                <div class="d-flex justify-content-center icons">
                    <a class="py-2 px-2" href="https://www.linkedin.com/in/chieh-lin-569430a9/"><i class="fab fa-linkedin"></i></a>
<a class="py-2 px-2" href="https://github.com/jaycetyle/"><i class="fab fa-github"></i></a>
<a class="py-2 px-2" href='https://blog.jaycetyle.com/index.xml'><i class="fas fa-rss"></i></a>

                </div>
            </div>
        </footer>

        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

        
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-1ZFSFPEZG5"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-1ZFSFPEZG5');
        }
      </script>
    </body>
</html>
